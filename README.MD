# StackSpot API Integration Java Client

A robust Java client implementation for interacting with the StackSpot AI API, providing seamless integration for AI-powered conversations and code generation capabilities.

## ğŸš€ Features

- Token-based authentication with automatic renewal
- AI chat interactions with streaming response support
- Execution management for AI operations
- Conversation tracking and management
- Environment configuration management

## ğŸ“‹ Prerequisites

- Java 17 or higher
- Maven
- StackSpot API credentials (Realm, Client ID, and Client Secret)

## âš™ï¸ Configuration

1. Create a `.env` file in the project root based on the provided `.env.example`:


# StackSpot API Integration â€” Cliente Java

Um cliente Java enxuto para integraÃ§Ã£o com a API StackSpot AI. Este projeto oferece uma camada de abstraÃ§Ã£o para autenticaÃ§Ã£o baseada em token, conversas com o agente de IA (chat) e gerenciamento de execuÃ§Ãµes.

## VisÃ£o geral

- Linguagem: Java 17+
- Build: Maven
- Framework web: Spring Boot (controllers REST)

O objetivo Ã© fornecer um exemplo reutilizÃ¡vel de como autenticar e consumir os endpoints da StackSpot AI em aplicaÃ§Ãµes Java, com foco em:
- Gerenciamento seguro de tokens (renovaÃ§Ã£o automÃ¡tica)
- InteraÃ§Ãµes com agente de chat (request/response)
- CriaÃ§Ã£o e acompanhamento de execuÃ§Ãµes

## ConteÃºdo do repositÃ³rio

Principais pacotes:

- `org.stackspotapi.controller` â€” endpoints REST expostos pela aplicaÃ§Ã£o (ex.: `ChatController`).
- `org.stackspotapi.service` â€” serviÃ§os que encapsulam lÃ³gica de autenticaÃ§Ã£o, chat e execuÃ§Ã£o.
- `org.stackspotapi.dto` â€” objetos de transferÃªncia de dados (requests/responses).

Estrutura (resumida):
```

src/main/java/org/stackspotapi/
â”œâ”€â”€ StackSpotApiApplication.java # Ponto de entrada da aplicaÃ§Ã£o
â”œâ”€â”€ controller/
â”‚ â””â”€â”€ ChatController.java # Endpoint: /api/v1/chat
â”œâ”€â”€ service/
â”‚ â”œâ”€â”€ AiChatService.java
â”‚ â”œâ”€â”€ EnsureTokenService.java
â”‚ â””â”€â”€ ExecutionService.java
â””â”€â”€ dto/ # DTOs usados nas requests e responses

```

## PrÃ©-requisitos

- JDK 17 ou superior
- Maven 3.6+
- Credenciais da StackSpot (Realm, Client ID, Client Secret e Agent ID)

## VariÃ¡veis de ambiente / ConfiguraÃ§Ã£o

Crie um arquivo `.env` na raiz do projeto (ou configure variÃ¡veis de ambiente no seu ambiente de execuÃ§Ã£o) com os seguintes valores:

```

STACKSPOT_REALM=seu_realm
STACKSPOT_CLIENT_ID=seu_client_id
STACKSPOT_CLIENT_SECRET=seu_client_secret
AGENT_ID=seu_agent_id

````

ObservaÃ§Ã£o: o projeto jÃ¡ faz referÃªncia ao uso de uma biblioteca para carregar variÃ¡veis de ambiente. Garanta que as credenciais nÃ£o sejam comitadas no repositÃ³rio.

## Como compilar e executar

# StackSpot API Integration â€” Cliente Java

Um cliente Java enxuto para integraÃ§Ã£o com a API StackSpot AI. Este projeto oferece uma camada de abstraÃ§Ã£o para autenticaÃ§Ã£o baseada em token, conversas com o agente de IA (chat) e gerenciamento de execuÃ§Ãµes.

## VisÃ£o geral

- Linguagem: Java 17+
- Build: Maven
- Framework web: Spring Boot (controllers REST)

O objetivo Ã© fornecer um exemplo reutilizÃ¡vel de como autenticar e consumir os endpoints da StackSpot AI em aplicaÃ§Ãµes Java, com foco em:
- Gerenciamento seguro de tokens (renovaÃ§Ã£o automÃ¡tica)
- InteraÃ§Ãµes com agente de chat (request/response)
- CriaÃ§Ã£o e acompanhamento de execuÃ§Ãµes

## ConteÃºdo do repositÃ³rio

Principais pacotes:

- `org.stackspotapi.controller` â€” endpoints REST expostos pela aplicaÃ§Ã£o (ex.: `ChatController`).
- `org.stackspotapi.service` â€” serviÃ§os que encapsulam lÃ³gica de autenticaÃ§Ã£o, chat e execuÃ§Ã£o.
- `org.stackspotapi.dto` â€” objetos de transferÃªncia de dados (requests/responses).

Estrutura (resumida):
```
src/main/java/org/stackspotapi/
â”œâ”€â”€ StackSpotApiApplication.java    # Ponto de entrada da aplicaÃ§Ã£o
â”œâ”€â”€ controller/
â”‚   â””â”€â”€ ChatController.java        # Endpoint: /api/v1/chat
â”œâ”€â”€ service/
â”‚   â”œâ”€â”€ AiChatService.java
â”‚   â”œâ”€â”€ EnsureTokenService.java
â”‚   â””â”€â”€ ExecutionService.java
â””â”€â”€ dto/                           # DTOs usados nas requests e responses
```

## PrÃ©-requisitos

- JDK 17 ou superior
- Maven 3.6+
- Credenciais da StackSpot (Realm, Client ID, Client Secret e Agent ID)

## VariÃ¡veis de ambiente / ConfiguraÃ§Ã£o

Crie um arquivo `.env` na raiz do projeto (ou configure variÃ¡veis de ambiente no seu ambiente de execuÃ§Ã£o) com os seguintes valores:

```
STACKSPOT_REALM=seu_realm
STACKSPOT_CLIENT_ID=seu_client_id
STACKSPOT_CLIENT_SECRET=seu_client_secret
AGENT_ID=seu_agent_id
```

ObservaÃ§Ã£o: o projeto jÃ¡ faz referÃªncia ao uso de uma biblioteca para carregar variÃ¡veis de ambiente. Garanta que as credenciais nÃ£o sejam comitadas no repositÃ³rio.

## Como compilar e executar

1. Compilar:

```bash
mvn clean package
```

2. Executar (modo local):

```bash
java -jar target/*.jar
```

A aplicaÃ§Ã£o inicia um servidor web (Spring Boot). Por padrÃ£o, o arquivo `ChatController` expÃµe um endpoint HTTP:

- POST /api/v1/chat

## Endpoints (resumo)

### POST /api/v1/chat
Envia um prompt para o serviÃ§o de chat e retorna a resposta gerada pela IA.

Request (JSON):

```json
{
  "prompt": "Pergunte algo ao agente",
  "conversationId": "opcional-id-da-conversa"
}
```

Response:
- 200 OK â€” corpo com a resposta gerada pelo agente (texto)
- 400 Bad Request â€” prompt ausente ou invÃ¡lido
- 500 Internal Server Error â€” falha de comunicaÃ§Ã£o ou erro interno

Exemplo CURL:

```bash
curl -X POST http://localhost:8080/api/v1/chat \
  -H "Content-Type: application/json" \
  -d '{"prompt":"Qual Ã© a capital da FranÃ§a?"}'
```

## ObservaÃ§Ãµes de implementaÃ§Ã£o

- `ChatController` valida se o prompt estÃ¡ presente e delega a chamada ao `AiChatService`.
- `AiChatService` Ã© responsÃ¡vel por obter/renovar tokens (via `EnsureTokenService`) e enviar requisiÃ§Ãµes para a API StackSpot.
- `ExecutionService` gerencia execuÃ§Ãµes e conversas (criaÃ§Ã£o/consulta de execuÃ§Ãµes e identificaÃ§Ã£o de conversationId).

## Testes

O repositÃ³rio nÃ£o possui testes automatizados incluÃ­dos por padrÃ£o. Recomenda-se adicionar ao menos:

- Testes unitÃ¡rios para serviÃ§os (Mockito + JUnit 5)
- Testes de integraÃ§Ã£o para os controllers (Spring Boot Test)

## Como contribuir

1. FaÃ§a um fork do projeto
2. Crie uma branch com uma descriÃ§Ã£o curta (`feature/`, `fix/`)
3. FaÃ§a alteraÃ§Ãµes e escreva testes quando aplicÃ¡vel
4. Abra um Pull Request descrevendo a mudanÃ§a

## SeguranÃ§a e boas prÃ¡ticas

- Nunca comite credenciais. Use `.gitignore` para `.env`.
- Habilite logs para depuraÃ§Ã£o, mas evite imprimir segredos.
- Considere adicionar limites de taxa e tratamento de timeouts ao cliente HTTP.

## PrÃ³ximos passos sugeridos (opcionais)

- Adicionar exemplos de uso do `AiChatService` em um pequeno cliente CLI ou testes de integraÃ§Ã£o.
- Incluir GitHub Actions para build/test/scan de seguranÃ§a.
- Documentar contrato JSON com OpenAPI/Swagger.

## Contato

Abra uma issue no repositÃ³rio para dÃºvidas, bugs ou sugestÃµes.
